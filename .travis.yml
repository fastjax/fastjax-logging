# Copyright (c) 2018 OpenJAX
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# You should have received a copy of The MIT License (MIT) along with this
# program. If not, see <http://opensource.org/licenses/MIT/>.

language: java
jdk:
- oraclejdk8
- oraclejdk11
install:
- cp settings.xml $HOME/.m2/settings.xml && rm -rf ~/.m2/repository/org/openjax
script:
- 'if [ "$TRAVIS_COMMIT_MESSAGE" = "Update README.md" ]; then
    return;
  elif [ "$TRAVIS_JDK_VERSION" = "oraclejdk8" ] &&
      [ "$TRAVIS_BRANCH" = "master" ] &&
      [ "$TRAVIS_PULL_REQUEST" = "false" ]; then
    sh -c "$SIGNING_KEY" | $GPG_EXECUTABLE --fast-import &> /dev/null &&
    mvn -e -U -Dmaven.rtest.skip -DrepoToken=$REPO_TOKEN clean deploy -P javadoc,report,deploy;
  else
    mvn -e -U -Dmaven.rtest.skip clean install;
  fi'
cache:
  directories:
    - ~/.m2/repository
env:
  global:
  - secure: m28KAkohJu/FHC3vR7x32SmCmeS96ApXsxh9TPFK0UV+5WkDEdaYXYp8SbUnvv+mZURlU/eGf1J6ZBFzj25L3WTai93Irr0zaW5WCvOopGnMCWFGnNXlSFUm3eoTZJH2zVXZRYefNVfz3k22nt9lXlnK9cK2QLGUdlOMYqtMbaeseUt5g1Cp9kpZJ7n74IblhAaXGk5gRNOD2VjlNzUYXAFgw0xUdIlKJkhoyW7tlp3tBKX8RNAzmwZZYJ1TQB86i7UDct793oHIhwo/HPOKrMniBUz5AhNdh9cmi2dcTaO55W2GDxn+jt/xMZq3r/PblMHqc93JIrXRIsVQDl0ZZF20CIc+5vQjEEAygg9ILowfFa9Aedr3Yixw1yCixg7AtvicP0AstBIYOqIg6H5wMCAzXhD76Dhy2vEr5xzU5iXqZSOTsTLHKvcHhL189Dw8K9Uv/4XV6jPFbtrNuswNdIOR3N+lWNgv4RtFmv++DZhIUR3d67dNLawQZeonIHDDxb3i9Yi6FScSN5l9C+0A/CqMPgrF6AUXPQmM163CV51OTxU7/nbvFGNON7m6mvAbL5mJyyW/pgylajZHuB36oYB/phz527PI+a9JghxUUQ3XXUNRlGXa17PjPNQZTv2bsQc0wwFPIclBxEY1PkrUNoVEiv20v137jCI5FRqioO0=
  - secure: JXVwMq4O2W+9ZX4URjXlFReolN6SKCEVpQtbVVMnNdR8HAiLvzMGZ7EGwhwf/rb3veEuwFOjXs43pxbPGPZaRJZ0GZB2wlHmcoB3j7q/efIOjvnzE5m2O6fdUeViAEi1Qy8gh7EI2opN1GR7pLWO4xUnpzztlEkm7iSs0pTI/+S+bpb3XhDpxUSIZ/rSuk2gHc+787pctYlc0Sb/8G15sY82MO4QPqB1BUOT0mkxJDw5CaYLg92aMxU3drYOxikOvreaGqvMLSMBDK/SOuPh7LonzfGvGM/F0QNkM7R7fomY1osj2sxLBsZ75l1iXqO2kw77m+5iJk8ro+XVDGsmF/bpWsaYCzMCzGZOzugQXm7Tfe1mjUomtKlrHcpuSVLt+UcVKAiaBCyL27FkoWlLnE6A56U3/6tIVS1WJL/qz6btj37acoYQCvuEyQ6bZ9GOs7XzFUGl5H8ozxFFou7yNSqVJ6BTYgyRNcpXhMa04lNuO/DYcugYDNbFZoSrHDiJXcVMOw3lzxw/i2ArOA4U476dKoYtfx0oKJeBGNijVRY3+ZJNOw7YI9O6Bk2JgHwNKNYT/8cg/Hh/0sIDRsYkQY+ttFvJUNj2Ays/gNASfKvBZR11Zo1MLwY8Ybi7Ln6OgcOyc0HffgvfBQZhUvSyiZnIyPGn0kU6c2DReWG2gNg=
  - secure: BZXbml5ZKIAMsfJLmmkJBKY0j8jskftEdOg16Jy6ERpdJZrrWjBhEnuFbiAZs/LSyVBKpBrZabaJ5330Y+J9wgAKAPxaa+oZSUbF3FgM3MrckHc79CSpzBD7vFU0FakpP2amhCsKc8byULAMuO/b1+mPw/t+nMtLNKiM4nZcd+K5uR6vlWhF/ll578oTqIWLBMPpXrG1zzl1IXgneiMANz5/Qbw2dk/fDuw95E3qc3RP/JfEK6NTKaFynwgN5DwBclJT0zKDMkxHYdmJvCa4DJMGk4cxwBt7Nw/T2T/LUBp16FMceKtfAvTc769/XajLd9CBChfDLis2lIcFrLHWejGgI/rN2wZ4j9F9aozVZ/E5AINnNyetdIbQWL+KFUYoaCpkZUSZ/T+H4LxLkY8unZjkeVFJc/aEt22hlaAt2EkMsSsrAl8lmEa394ywH8WHdjWS8c8sxPMnQ40dqGYZpjzkr4ukRB8NINt57kBdeDe3snk2Nm8Q6qaUrYhQe49IFhWE2zqb5m3MvDnue3oDhwRpRt/ECsC38k2jFGYJpUTNHF9zoEMEmO0vxBwrk/KuoTuGS0LgNpnP6XjZXRjOuXa8NZ+a737tH0+I+LbiT2z6ZVm3IiIxOTbTaVZ/WU/DFimHBbahEPx4C9/kQcz+mSVS6DnV09nmrJyJs7rRWiM=
  - secure: Clcviin4UIaM0KXmxKy13LGRo2xt/cmxkI0VXFoz1iLPneV+aadwf+WXQy4XlWhRkAq186ZHa0P6xeaSEu7ZLJhs0O10QC0dXOdv3Jn9zYYcTWDslRrMR6j/Z6RTSUHylfWwrjeSMDD/fgQGaVaPZAhciKe33W2K/i7HIgLpIZS1yQP1etr6K8jHg+QXymCtbgVsCQBcjWehFodXpvs/zLQwlKv6DUbiaQu8AKqBM5YCAy7wUzph7JH5YIsJyxpDzsv0zniN/UHdHl5U9zibKfOo/ShKz63JmHHuSVz816Gd//1hl2MtR/3NJpfTFprbXSNuWmR4EiLkdVVeNIO9f0fff8mq1u5xyAJnmSkOvkM/sqVLIAWJciRsPW0IA75jnd/p6yKK0rbf8GfR4OS+lyaQptifNi2M4FhFhZN/ycmEJsUfQQZxdVdHIdLS/IW2zeuY7FVN+mxtCW9MEy6N2crJg66heMZS9FRN9uOP8xJFpfVVExghLb7oPT6LDktZ0RHLJ3CVx0FvavYI48XP5YnGxf1mjDao93FkMTPX/dQStKx2meD8yi5PmCllASbCJWEHiisoOaElm8gxClHC2WbH027rRbLgKpwztxxOjLjmsCTu+Hbzf8deMm7yzPeCKRyd0QwEC8z7qbTnShuX+fYwPyUckjsW4SHAJS01GIw=
  - secure: ayVLZTAW3bDM3tlavRajKnGpgsEfF7SpQUazZx0N6rWiu6vDK1xnbIH7grSJZg+0MR0nid5B2IdzewzT1tnmJSPrJ6PSJJqAL+oZG2aQNauC4msGr53pnQZPGqhU8BQp6rmy6IR24mt0lAOTPkehuUctgGaUTG8pvjegLu46q5swq4bKLcLzunC5X8k5LHYlFZMai0dL0WTaj17E+FkYFzIQw6vO0SAEBggpaTN1aM11FiSiZDI/41yPb96NrzbwsMlcNywOb9y9oPbymY4Va5JXmy1sPw3WDy2mqHjtp+LblYKo44WIv6zbRs0rD8AXX1hnQ4zjjdZURDJHWncLnK2wuIvnp+ZqC6txtqxDsFNhmb5/BG/C0uExI5DnvQQSiGdXYS6XpkUDNYiFdOAqahvxY9JodZ+3+KYPcdQDwa2iJXV0KPJGzwQ1R50GEaCuAoNhQNJsUpLCHx3LhM5f4eoX/wZdj55HCb9fVaguhTcqg7RwC7UYuhMmjHT+ChqyDKQowX2CPQTRUOGUixjYgyjmMNBIUrvxU7jWOBS8P4XWpnk2bKOQtOonNRIq873mIxKRMe5hh6F4gUGo0hvnj6shi5GSYapgX+N9EDVokHU+u8KncEXm9E8ONLvQmvaIynDVd8HHFNa2U0QhIAe85EF94fOeoEOgTwzENFYmpcc=
  - secure: PeDZTFLqqkgSHKZ7Pxo2YM13lHDjgsapZCK73UGlBWrMlHTy7SBvfsBPHCmOYWU/Jq6SIhmKuDANQlBS9t1XzP/kAgvdXAfeYdovt4OnY3FwfkbuNKR5bPedo+CigeXOJsSxVLMZhP6RG8ZGJmZVI5eD6dWOEBd0diZKkwtBtgcv6JEoU4qgX1z8/DLjo9zXjzNQg1YCwVr0i6eG5YtB/A7+72b1eaOLsGNpa6KZNNdK92Rt8iuIRVLSA4Jfm8hDz1J7I9lKBPcP+V7mzDfI6w+hc43daO+ok/LviHaZW7RPxnsg2J/5L/PbfaQnurV7WUPoLSKiOmLbhwLreN58tZpa2lNE0l5zAlpOU2AbARVJzEnVFPIUBxcqYExtAPqyjUzdmTy5rDeVsprvdLn8Kmm+6aikyxa9k55OY+Vt7H9CnqnfnvBMRU69vPB2p/5KyoaK6t3qH5FPljXka6m6EVwt8zEnJuXGIogrCtBlHMjwKAnqG2Uh1KD6Cmu8XFYzUllYLAbsYkvgNdhHD4JW8Fi7Tc+XRQEx34n4/53cYmdOxPrfDTqAoFR0wUQsTGPk4+kBcjtoadPELl7kz8mo1aMUtNwXPwI6OHelj8dSP1ipKvgrNPO9FGp2rh0MtiCXX9qOiEUgqejYD1lnQVAdsQ7mexaH6stmvuka/+4qo9E=
  - secure: nl8wjAfb+RDOVtGnmDSRUaoTEGRstTJE+Py5fnqSznUam3xGMzDAV9jD1VptKYixOeHfv6INjHEppmz8qJh596kd1YWs7OcYzrRoyd1Mroh3TJIpWEKHJ2rsYYjbKYNleJYK+qTq9yO66+vxSCDYoN0zmsWb9uXPnYsjfbmY7ysFnTF///6olrEizXpIulDIUuNzyo7pigqMRNEhr/M1pm6P/i8GZnyL9BO9KDlZVRNufGYatvW/05xeHULpUeKFyGRbkKRXe2krcKjKfbA3Uk3ZFt54SGgPQfpd+eau48aodzLnuLz32YSazHWh9iqB4NUAbT0PxJ91TTQ36fnIuSSSH+7UwKoPR8iZGkczOFnTsePp/qEsutaz0eAkbuj/jVgWUWC9UBxdxAQcQ7qJM3+lwxo8X1n/NEjLPPtbvi6BS9WAF48gyu7aH/ikbsyvdsbTXsmC5us6RZ8u0+uAtEKZ6b7oilFX1hq+SBsEsQHvZhZaBy11WXgWXQnuINMLbmyr3n4hzKn8EtPsjZeI89ufuqn0NFpJzgzRNNxv3QWIbz7e6nW8p7M6aLh17jRuiOvqEebHtns2xNyo96U4IGCISEffWOn2a4UC2g8xCwMl7yWSiB87eMDfTvD8Kw9QpySrA6V/QcO71CdawacUQgS8zKghKbP+p88ATrn6ELM=
